"use strict";var t=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function d(t,e,i,n,a,r,s,h){var o=!(8<arguments.length&&void 0!==arguments[8])||arguments[8];c(this,d),this.canvas=document.createElement("canvas"),this.radius=i,this.context=this.canvas.getContext("2d"),this.x=t,this.y=e,this.angle=n,this.direction=a,this.speed=r,this.color=s,this.stroke=h,this.blur=o,this.draw()}return t(d,[{key:"draw",value:function(){this.canvas.width=2*this.radius,this.canvas.height=2*this.radius,this.blur&&(this.context.filter="blur(0.2em)");var t=.8*this.radius,e=this.canvas.width/2,i=this.canvas.height/2;this.context.fillStyle=this.color,this.context.beginPath();for(var n=g/10,a=n/2/2,r=0;r<g;r+=n){var s=r-.75*a,h=r+.75*a,o=s-.5*a,d=h+.5*a;this.context.lineTo(e+Math.cos(o)*t,i+Math.sin(o)*t),this.context.lineTo(e+Math.cos(s)*this.radius,i+Math.sin(s)*this.radius),this.context.lineTo(e+Math.cos(h)*this.radius,i+Math.sin(h)*this.radius),this.context.lineTo(e+Math.cos(d)*t,i+Math.sin(d)*t)}this.context.closePath(),this.context.fill(),this.stroke&&(this.context.strokeStyle=this.stroke,this.context.stroke())}}]),d}(),a=function(){function r(t,e,i,n,a){c(this,r),this.context=t,Object.assign(this,{x:e,y:i,width:n,height:a}),this.gears=[]}return t(r,[{key:"drawGear",value:function(t){this.context.translate(t.x,t.y),this.context.rotate(t.angle),this.context.translate(-t.radius,-t.radius),this.context.drawImage(t.canvas,0,0),this.context.translate(t.radius,t.radius),this.context.rotate(-t.angle),this.context.translate(-t.x,-t.y)}},{key:"addGear",value:function(t,e,i,n,a,r,s){var h=new o(t,e,i,n,a,r,s);return this.gears.push(h),h}},{key:"draw",value:function(t,e){var i=this;this.context.translate(this.x,this.y),this.gears.forEach(function(t){t.angle+=t.speed*e*t.direction,i.drawGear(t)}),this.context.translate(-this.x,-this.y)}},{key:"findOverlappingGear",value:function(a,r,s,h){var o=this;return this.gears.find(function(t){if(t.color!==h)return!1;var e=o.x+t.x-a,i=o.y+t.y-r,n=t.radius+s;return e*e+i*i<n*n})}},{key:"buildMeshFromGear",value:function(t){for(var e=1+Math.floor(2*Math.random()),i=t.radius,n=t.color,a=0;0<e;){a++;var r=Math.floor(10*Math.random())*g/10,s=t.x+Math.cos(r)*i*1.85,h=t.y+Math.sin(r)*i*1.85,o=t.angle+g/10/2;if(s<this.width&&h<this.height&&0<s&&0<h&&!u(this.x+s,this.y+h,.8*i,n)&&(a=0,e--,t=this.addGear(s,h,i,o,-1*t.direction,t.speed,n),n===f&&Math.random()<.3)){var d=this.addGear(t.x,t.y,t.radius/2,t.angle,t.direction,t.speed,l);this.buildMeshFromGear(d)}if(20<a)return}}},{key:"buildMesh",value:function(t){var e=Math.random()*this.width,i=Math.random()*this.height,n=150;t===h&&(n=200),t===l&&(n=60);var a={x:e,y:i,radius:n,angle:0,direction:1,speed:d,color:t};this.buildMeshFromGear(a)}},{key:"generate",value:function(){this.buildMesh(h),this.buildMesh(h),this.buildMesh(f),this.buildMesh(f),this.buildMesh(l),this.gears.sort(function(t,e){return i.indexOf(t.color)-i.indexOf(e.color)})}}]),r}();function u(e,i,n,a){return w.find(function(t){return t.findOverlappingGear(e,i,n,a)})}var r=document.getElementById("gears"),s=r.getContext("2d"),l="#ffffff",f="#ccece7",h="#25655a",i=[h,f,l],e=1500,n=700,g=2*Math.PI,d=.002,v=1,w=[],x=null,y=window.scrollY,m=200,M=document.getElementById("primaryGearContainer"),p=document.getElementById("primaryGears"),b=p.getContext("2d"),k=new a(b,0,0,0,0),G=new o(0,0,m/2,0,-1,d,f,h,!1);function E(t){requestAnimationFrame(E),null===x&&(x=t);var e=t-x;16<e&&(e=16);var i=window.scrollY-y;y=window.scrollY,0!==i&&y<460&&(s.clearRect(0,0,r.width,r.height),s.save(),s.scale(v,v),w.forEach(function(t){t.draw(e,i)}),G.angle+=i*d,p.width=m,p.height=m,G.x=m/2,G.y=m/2,k.drawGear(G),s.restore()),x=t}var C=600;function O(){var t=masthead.getBoundingClientRect();r.width=t.width,r.height=t.height;for(var e=function(i){for(var t=function(e){if(!w.find(function(t){return t.x===i*C&&t.y===e*C})){var t=new a(s,i*C,e*C,C,C);w.push(t),t.generate()}},e=0;e<r.height/C;e++)t(e)},i=0;i<r.width/C;i++)e(i);var n=M.getBoundingClientRect();m=n.width,w.forEach(function(t){t.draw(0,0)}),p.width=m,p.height=m,G.x=m/2,G.y=m/2,G.radius=m/2,G.draw(),k.drawGear(G)}function B(){var t=window.location.hash,e=document.querySelector(t);if(e){var i=e.getBoundingClientRect(),n=document.querySelector("header").getBoundingClientRect(),a=window.pageYOffset+i.top-n.height;window.scrollTo(window.pageXOffset,a)}}O(),window.addEventListener("resize",O),requestAnimationFrame(E),window.addEventListener("load",B),window.addEventListener("hashChange",B);
//# sourceMappingURL=work.js.map